<% provide(:title, t('title.videos.own')) %>

<% content_for :homelink do %>
  <a href="#" onClick="closeActivity()" id="ach_so_link">
    <%= image_tag("ic_launcher.png", alt: "Ach so!", width: 32, height: 32) %>
  </a>
<% end %>

<% content_for :pagetitle do %>
  <%= t('.pagetitle') %>
<% end %>

<div class="mdl-grid">
  <%= render(partial: 'videocontainer', collection: @videos) || render(html: "<h2 class='mdl-color-text--grey-600'>#{t('.empty_filler')}</h2>".html_safe)%>
</div>

<%# Video upload button %>
<% if policy(:video).create? && ENV["ACHRAILS_VIDEO_UPLOADER_URL"].present? %>
  <% post_url = ENV["ACHRAILS_VIDEO_UPLOADER_URL"] + "?upload_token=#{@upload_token}&redirect_to=#{upload_callback_videos_url}" %>
  <%= form_tag(post_url, multipart: true, id: 'video_upload_form') do %>
    <%= file_field_tag 'video' %>
    <%= submit_tag t('.upload_button'),
            class: "mdl-button mdl-js-button mdl-button--raised mdl-button--colored" %>
  <% end %>
<% end %>

<% if Rails.env.development? %>

  <%# Manifest upload button for testing %>
  <% if policy(:video).create? %>
    <%= form_tag(upload_videos_path, multipart: true) do %>
      <%= file_field_tag 'manifest' %>
      <%= submit_tag t('.upload_button'),
              class: "mdl-button mdl-js-button mdl-button--raised mdl-button--colored" %>
    <% end %>
  <% end %>

<% end %>


